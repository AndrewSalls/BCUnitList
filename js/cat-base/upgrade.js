import createArrowNumberBox from"./arrow-box.js";import SETTINGS from"../../assets/settings.js";export default async function loadUpgradeInfo(initialUpgrades,updateCGS,updateAbility){const wrapper=document.querySelector("#upgrade-selector");wrapper?.appendChild(createCGSBox(initialUpgrades.cgs,updateCGS));for(let x=0;x<SETTINGS.abilities.abilityNames.length;x++)wrapper?.appendChild(createUpgradeLevelBox(SETTINGS.abilities.abilityNames[x],SETTINGS.abilities.levelCaps[x],SETTINGS.abilities.plusLevelCaps[x],initialUpgrades.abilities[x],x,updateAbility))}function createCGSBox(isOwned,updateCGS){const wrapper=document.createElement("div");wrapper.classList.add("v-align"),wrapper.classList.add("upgrade-box");const title=document.createElement("h4");title.textContent="The Cat God";const image=document.createElement("img");image.src="./assets/img/upgrades/cat_god.png";const ownedWrapper=document.createElement("div");ownedWrapper.classList.add("h-align");const ownedLabel=document.createElement("label");ownedLabel.textContent="Owned?";const ownedCheckbox=document.createElement("input");return ownedCheckbox.id="the-one-true-cat",ownedCheckbox.type="checkbox",ownedCheckbox.title="Have you purchased The Cat God [not to be confused with Cat God (Cool Dude)]",ownedCheckbox.checked=isOwned,ownedCheckbox.onchange=()=>updateCGS(ownedCheckbox.checked),ownedWrapper.append(ownedLabel,ownedCheckbox),wrapper.append(title,image,ownedWrapper),wrapper}function createUpgradeLevelBox(name,levelCap,levelPlusCap,currentLevelData,id,updateAbility){const wrapper=document.createElement("div");wrapper.classList.add("v-align"),wrapper.classList.add("upgrade-box");const title=document.createElement("h4");title.textContent=name;const image=document.createElement("img");image.src=`./assets/img/upgrades/ability_${id}.png`;const levelWrapper=document.createElement("div");levelWrapper.classList.add("h-align");let levelInput=null,plusLevelInput=null;const userRankDisplay=document.querySelector("#user-rank"),[levelElm,levelInputElm]=createArrowNumberBox(levelCap,currentLevelData.level,(oldValue,newValue)=>{userRankDisplay.textContent=`${parseInt(userRankDisplay.textContent??"0")+(newValue-oldValue)}`,updateAbility(id,parseInt(levelInput.value),parseInt(plusLevelInput?.value??"0"))},1);if(levelInput=levelInputElm,levelElm.classList.add("upgrade-level"),levelWrapper.appendChild(levelElm),levelPlusCap>0){const[plusLevelElm,plusInputElm]=createArrowNumberBox(levelPlusCap,currentLevelData.plus,(oldValue,newValue)=>{userRankDisplay.textContent=`${parseInt(userRankDisplay.textContent??"0")+(newValue-oldValue)}`,updateAbility(id,parseInt(levelInput.value),parseInt(plusLevelInput.value))});plusLevelElm.classList.add("upgrade-plus-level"),plusLevelInput=plusInputElm;const plusSign=document.createElement("p");plusSign.classList.add("upgrade-plus-text"),plusSign.textContent="+",levelWrapper.append(plusSign,plusLevelElm)}return wrapper.append(title,image,levelWrapper),wrapper}