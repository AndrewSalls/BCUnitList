let topPos=0;export function initializeOrbSelection(){const modal=document.querySelector("#orb-selection-modal");document.querySelector("#orb-selection-cancel").onclick=()=>{modal.classList.add("hidden"),document.body.classList.remove("unscrollable"),document.documentElement.scrollTop=topPos}}export function openOrbSelectionModal(target){const modal=document.querySelector("#orb-selection-modal"),attachOrb=document.querySelector("#attach-orb");modal.classList.remove("hidden"),topPos=document.documentElement.scrollTop,document.body.classList.add("unscrollable"),document.body.style.top=-1*topPos+"px";const resultOrb=document.querySelector("#orb-result"),resultColor=resultOrb.querySelector(".orb-color"),resultType=resultOrb.querySelector(".orb-type"),resultRank=resultOrb.querySelector(".orb-rank"),color=target.querySelector(".orb-color"),type=target.querySelector(".orb-type"),rank=target.querySelector(".orb-rank"),series=color.dataset.trait?"99"===color.dataset.trait?"ability":"effect":"";resultColor.src=color.src,"ability"===series?(document.querySelector("#ability-toggle").click(),resultColor.dataset.trait=color.dataset.trait,window.localStorage.setItem("tss","a")):"effect"===series?(document.querySelector("#effect-toggle").click(),(document.querySelector(".trait-selection")?.querySelector(`.image-selector[data-trait="${color.dataset.trait}"]`)).click(),resultColor.dataset.trait=color.dataset.trait,window.localStorage.setItem("tss","e")):(resultColor.dataset.trait="",modal.querySelectorAll(".orb-selected").forEach(s=>s.classList.remove("orb-selected")),"a"===window.localStorage.getItem("tss")?document.querySelector("#ability-toggle").click():"e"===window.localStorage.getItem("tss")?document.querySelector("#effect-toggle").click():(document.querySelector("#effect-toggle").click(),window.localStorage.setItem("tss","e"))),type.classList.contains("invisible")?(resultType.src="",resultType.classList.add("invisible"),resultType.dataset.type=""):(resultType.src=type.src,resultType.classList.remove("invisible"),resultType.dataset.type=type.dataset.type,"ability"===series?(document.querySelector(".ability-selection")?.querySelector(`.image-selector[data-type="${type.dataset.type}"]`)).click():(document.querySelector(".type-selection")?.querySelector(`.image-selector[data-type="${type.dataset.type}"]`)).click()),rank.classList.contains("invisible")?(resultRank.src="",resultRank.classList.add("invisible"),resultRank.dataset.rank=""):(resultRank.src=rank.src,resultRank.classList.remove("invisible"),resultRank.dataset.rank=rank.dataset.rank,document.querySelector(`#${series}-submenu .rank-selection img[data-rank="${rank.dataset.rank}"]`).click()),resultColor.dataset.trait&&resultType.dataset.type&&resultRank.dataset.rank?attachOrb.disabled=!1:attachOrb.disabled=!0,modal.querySelector("#remove-orb").onclick=()=>{color.src="./assets/img/orb/empty-orb.png",color.dataset.trait="",type.src="",type.dataset.type="",type.classList.add("invisible"),rank.src="",rank.dataset.rank="",rank.classList.add("invisible"),target.dispatchEvent(new Event("change")),modal.classList.add("hidden"),document.body.classList.remove("unscrollable"),document.documentElement.scrollTop=topPos},modal.querySelector("#attach-orb").onclick=()=>{color.src=resultColor.src,color.dataset.trait=resultColor.dataset.trait,type.src=resultType.src,type.dataset.type=resultType.dataset.type,type.classList.remove("invisible"),rank.src=resultRank.src,rank.dataset.rank=resultRank.dataset.rank,rank.classList.remove("invisible"),target.dispatchEvent(new Event("change")),modal.classList.add("hidden"),document.body.classList.remove("unscrollable"),document.documentElement.scrollTop=topPos}}