import createRow from"./create-unit-row.js";import{getValuesFromRow,observeRowChange}from"../../helper/link-row.js";import attachUnitTableColumnSort from"../sort-units.js";export default function createSearchableTable(titleText,unitData,changeEvent=null,loadingBar=null,isLegendTable=!1){const wrapper=document.createElement("div"),table=document.createElement("table");table.classList.add("unit-table-list");const thead=document.createElement("thead"),theadRow=document.createElement("tr");theadRow.classList.add("column-header-text");const tbody=document.createElement("tbody");tbody.classList.toggle("legend-rare-multi",isLegendTable);const titleRow=document.createElement("tr"),titleRowText=document.createElement("td");titleRowText.colSpan=8,titleRowText.classList.add("searchable-table-title"),titleRowText.textContent=titleText,titleRowText.onclick=()=>{theadRow.classList.toggle("hidden"),tbody.classList.toggle("hidden")},"1"===window.localStorage.getItem("s2")&&titleRowText.click(),titleRow.appendChild(titleRowText);const favoriteCol=document.createElement("td");favoriteCol.classList.add("sort-favorite");const favIconWrapper=document.createElement("div");favIconWrapper.classList.add("fav-wrapper");const favIcon=document.createElement("img");favIcon.src="./assets/img/fav-full.png",favIconWrapper.appendChild(favIcon),favoriteCol.appendChild(favIconWrapper);const optionHead=createColumnHead("head-option","Stats");optionHead.colSpan=2,theadRow.append(createColumnHead("sort-id","ID"),createColumnHead("sort-form","Icon"),createColumnHead("sort-name","Name"),createColumnHead("sort-level","Level"),createColumnHead("sort-talent","Talents"),createColumnHead("sort-orb","Talent Orb(s)"),favoriteCol,optionHead),thead.append(titleRow,theadRow);const colgroup=document.createElement("colgroup"),inst=_class=>{const output=document.createElement("col");return output.classList.add(_class),output};inst("col-option");colgroup.append(inst("col-id"),inst("col-form"),inst("col-name"),inst("col-level"),inst("col-talent"),inst("col-orb"),inst("col-favorite"),inst("col-option"),inst("col-mega-option")),table.append(colgroup,thead,tbody),wrapper.appendChild(table);for(const unit of unitData){if(null!==unit){const row=createRow(unit);tbody.appendChild(row),changeEvent&&observeRowChange(row,()=>{changeEvent(getValuesFromRow(row))})}loadingBar?.rincrement()}return attachUnitTableColumnSort(table),wrapper}function createColumnHead(className,textContent){const col=document.createElement("td");return col.classList.add(className),col.textContent=textContent,col}